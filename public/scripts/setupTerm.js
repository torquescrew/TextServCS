// Generated by CoffeeScript 1.6.3
var resizeTerm, rowHeight, term;

term = void 0;

(function() {
  return window.onload = function() {
    var socket;
    socket = io.connect();
    return socket.on("connect", function() {
      term = new Terminal({
        cols: 80,
        rows: 10,
        useStyle: true,
        screenKeys: true
      });
      term.on("data", function(data) {
        return socket.emit("data", data);
      });
      term.on("title", function(title) {
        return document.title = title;
      });
      term.open(document.getElementById('output'));
      term.write("\u001b[31mWelcome to term.js!\u001b[m\r\n");
      socket.on("data", function(data) {
        return term.write(data);
      });
      return socket.on("disconnect", function() {
        return term.destroy();
      });
    });
  };
}).call(this);

rowHeight = function() {
  var termCH;
  termCH = document.getElementsByClassName('terminal')[0].clientHeight;
  return termCH / term.rows;
};

resizeTerm = function(height) {
  var termOH;
  termOH = document.getElementsByClassName('terminal')[0].offsetHeight;
  if (height > (termOH + rowHeight())) {
    term.resize(term.cols, term.rows + 1);
  }
  if (height < (termOH - rowHeight())) {
    return term.resize(term.cols, term.rows - 1);
  }
};
